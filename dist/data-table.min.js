/*
 * data-table 0.2.0
 * (c) 2021 Asher Morgan (MIT)
 * https://github.com/ashermorgan/data-table
 */
let DataTable=function(e,t){let o=[];Object.defineProperty(this,"body",{get:function(){return o}});let r=[];Object.defineProperty(this,"headers",{get:function(){return r}});let n={up:'<svg viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="updown"><polyline points="18 16 12 8 6 16 18 16"></polyline></svg>',down:'<svg viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="updown"><polyline points="18 8 12 16 6 8 18 8"></polyline></svg>',updown:'<svg viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="updown"><polyline points="15 10 12 6 9 10 15 10"></polyline><polyline points="15 14 12 18 9 14 15 14"></polyline></svg>'},l="";Object.defineProperty(this,"searchQuery",{get:function(){return l}});let i=null;Object.defineProperty(this,"selector",{get:function(){return i}});let s=!1;Object.defineProperty(this,"isSortable",{get:function(){return s},set:function(e){s=e,this.render()}});let d=null;Object.defineProperty(this,"sortAscending",{get:function(){return d}});let u=null;Object.defineProperty(this,"sortIndex",{get:function(){return u}});let a={headers:[],body:[]};var c,f;let h=function(){a.headers=r,a.body=[];for(let e=0;e<o.length;e++)a.body.push({visible:!0,columns:o[e],row:e});b(l);var e=u,t=d;u=null,d=null,y(e,t)};this.render=function(){let e=document.querySelector(this.selector);e.classList.add("data-table");let t="<table>";if(0<a.headers.length){t+="<thead><tr>";for(let e=0;e<a.headers.length;e++)t+=`<th>${a.headers[e]}`,s&&(u!==e?t+=`<button>${n.updown}</button>`:u===e&&!0===d?t+=`<button>${n.up}</button>`:u===e&&!1===d&&(t+=`<button>${n.down}</button>`)),t+="</th>";t+="</thead></tr>"}if(0<a.body.length){t+="<tbody>";for(var o of a.body)if(o.visible){t+="<tr>";for(var r of o.columns)t+=`<td>${r}</td>`;t+="</tr>"}t+="</tbody>"}if(t+="</table>",e.innerHTML=t,s){let t=document.querySelectorAll(`${this.selector} th`);for(let e=0;e<t.length;e++)t[e].addEventListener("click",()=>{u!==e?this.sort(e,!0):u===e&&!0===d?this.sort(e,!1):u===e&&!1===d&&this.sort(e,null)})}};let b=function(e){for(var t of a.body){t.visible=!1;for(var o of t.columns)if(o.toLowerCase().includes(e.toLowerCase())){t.visible=!0;break}}l=e};this.search=function(e){b(e),this.render()},this.setBody=function(e){o=e,h(),this.render()},this.setHeaders=function(e){r=e,h(),this.render()};let y=function(o,e){u===o&&d===e||(o<0||o>=a.headers.length||null===e?(a.body.sort((e,t)=>e.row<t.row?-1:1),e=o=null):u===o&&d!==e?a.body.reverse():(a.body.sort((e,t)=>e.columns[o]===t.columns[o]?0:e.columns[o]<t.columns[o]?-1:1),e||a.body.reverse())),u=o,d=e};this.sort=function(e,t){y(e,t),this.render()},c=this,f=t,i=e,f&&(f.body&&(o=f.body),f.headers&&(r=f.headers),void 0!==f.sortable&&(s=f.sortable)),h(),c.render()};Object.defineProperty(DataTable,"version",{get:function(){return"0.2.0"}}),"function"==typeof define&&define.amd?define(function(){return root.DataTable=DataTable,root.DataTable}):"object"==typeof exports&&"undefined"!=typeof module?module.exports=DataTable:this.DataTable=DataTable;